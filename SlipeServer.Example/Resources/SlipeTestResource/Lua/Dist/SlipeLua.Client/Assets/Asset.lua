-- Generated by CSharp.lua Compiler
local System = System
local SlipeLuaMtaDefinitions = SlipeLua.MtaDefinitions
local SlipeLuaClientGame
System.import(function (out)
  SlipeLuaClientGame = SlipeLua.Client.Game
end)
System.namespace("SlipeLua.Client.Assets", function (namespace)
  --/ <summary>
  --/ Represents a single asset file.
  --/ </summary>
  namespace.class("Asset", function (namespace)
    local getFilepath, getState, HandleDownloadComplete, Download, addOnDownloadComplete, removeOnDownloadComplete, __ctor__
    __ctor__ = function (this, filepath)
      this.state = 0 --[[DownloadState.Default]]
      this.filepath = filepath

      SlipeLuaClientGame.GameClient.addOnFileDownloadComplete(System.fn(this, HandleDownloadComplete))
    end
    getFilepath = function (this)
      return this.filepath
    end
    getState = function (this)
      return this.state
    end
    HandleDownloadComplete = function (this, source, eventArgs)
      if eventArgs:getPath() == this.filepath then
        this.state = eventArgs:getSuccess() and 2 --[[DownloadState.Downloaded]] or 3 --[[DownloadState.Failed]]
        SlipeLuaClientGame.GameClient.removeOnFileDownloadComplete(System.fn(this, HandleDownloadComplete))
        local default = this.OnDownloadComplete
        if default ~= nil then
          default()
        end
      end
    end
    Download = function (this)
      if this.state ~= 2 --[[DownloadState.Downloaded]] then
        this.state = 1 --[[DownloadState.Downloading]]
        SlipeLuaMtaDefinitions.MtaClient.DownloadFile(this.filepath)
      end
    end
    addOnDownloadComplete, removeOnDownloadComplete = System.event("OnDownloadComplete")
    return {
      getFilepath = getFilepath,
      state = 0,
      getState = getState,
      Download = Download,
      addOnDownloadComplete = addOnDownloadComplete,
      removeOnDownloadComplete = removeOnDownloadComplete,
      __ctor__ = __ctor__,
      __metadata__ = function (out)
        return {
          fields = {
            { "filepath", 0x3, System.String },
            { "state", 0x3, System.Int32 }
          },
          properties = {
            { "Filepath", 0x206, System.String, getFilepath },
            { "State", 0x206, System.Int32, getState }
          },
          methods = {
            { ".ctor", 0x106, nil, System.String },
            { "Download", 0x6, Download },
            { "HandleDownloadComplete", 0x201, HandleDownloadComplete, out.SlipeLua.Client.Elements.ResourceRootElement, out.SlipeLua.Client.Game.Events.OnFileDownloadCompleteEventArgs }
          },
          class = { 0x6 }
        }
      end
    }
  end)
end)
